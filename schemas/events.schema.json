{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "POGO Event Schema",
  "description": "Schema for validating Pokémon GO event data (flexible Category).",
  "type": "object",
  "properties": {
    "Start Date": {
      "type": "string",
      "description": "Event start date in YYYY-MM-DD format",
      "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
    },
    "End Date": {
      "type": ["string", "null"],
      "description": "Event end date in YYYY-MM-DD format (nullable)",
      "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
    },
    "Event Name": {
      "type": "string",
      "description": "Full name of the event"
    },

    /*
      IMPORTANT CHANGE:
      - Category is now any non-empty string (no enum), so we don't fail when new labels appear.
      - We also support an optional 'Category Normalized' that CAN be an enum if present.
    */
    "Category": {
      "type": "string",
      "minLength": 1,
      "description": "Human/Source label for event type (free-form: e.g., 'Community Day', 'Raid Hour', 'Event/News')"
    },
    "Category Normalized": {
      "type": "string",
      "description": "Stable bucket derived by our pipeline; optional",
      "enum": [
        "CD",
        "CD Classic",
        "Raid",
        "Mega",
        "Shadow Raid",
        "Spotlight",
        "Research",
        "Other",
        "Event/News"
      ]
    },

    "Source": {
      "type": "string",
      "description": "Origin of the event listing"
    },
    "Source URL": {
      "type": "string",
      "description": "Direct link to the source",
      "format": "uri"
    },
    "Sources": {
      "type": "array",
      "description": "List of raw sources contributing to this row",
      "items": { "type": "string" }
    },

    "Featured": {
      "type": ["string", "null"],
      "description": "Main Pokémon or feature highlighted (nullable)"
    },
    "Bonuses": {
      "type": ["string", "null"],
      "description": "List or description of bonuses (nullable)"
    },
    "Region": {
      "type": ["string", "null"],
      "description": "Region or scope of the event (nullable)"
    },

    "Date Parse Status": {
      "type": "string",
      "description": "Status of date parsing for this row",
      "enum": ["parsed", "missing", "inferred", "invalid", ""]
    },
    "Date Inference Confidence": {
      "type": "string",
      "description": "Confidence score for inferred date (stringified float or blank)"
    },
    "Date Inference Source": {
      "type": "string",
      "description": "Source of inferred date, if any (e.g., pubDate, title regex, etc.)"
    },
    "Has Valid Dates": {
      "type": "boolean",
      "description": "True if Start Date is valid, false otherwise"
    }
  },

  "required": [
    "Start Date",
    "Event Name",
    "Category",
    "Source",
    "Source URL",
    "Sources",
    "Has Valid Dates"
  ],

  "additionalProperties": true
}